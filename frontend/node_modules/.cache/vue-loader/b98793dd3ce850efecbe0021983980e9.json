{"remainingRequest":"/Users/traore/Sites/enConstruction/kemetmaat/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/traore/Sites/enConstruction/kemetmaat/frontend/src/views/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/traore/Sites/enConstruction/kemetmaat/frontend/src/views/Profile.vue","mtime":1640830342857},{"path":"/Users/traore/Sites/enConstruction/kemetmaat/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1631176188195},{"path":"/Users/traore/Sites/enConstruction/kemetmaat/frontend/node_modules/babel-loader/lib/index.js","mtime":1631176189508},{"path":"/Users/traore/Sites/enConstruction/kemetmaat/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1631176188195},{"path":"/Users/traore/Sites/enConstruction/kemetmaat/frontend/node_modules/vue-loader/lib/index.js","mtime":1631176189929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKLy8gaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKCiAgZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBwcm9maWxlOiAnJywKICAgICAgICBwb3N0czogewogICAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgICAgZW1haWw6ICcnLAogICAgICAgICAgYmlvOiAnJywKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICBsZXQgb2JqTXlTZXNzaW9uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9iaiIpCiAgICAgIGxldCBteVN0b3JhZ2VUb2tlbiA9IEpTT04ucGFyc2Uob2JqTXlTZXNzaW9uKQogICAgICBsZXQgdG9rZW4gPSBteVN0b3JhZ2VUb2tlbi5teVRva2VuOwogICAgICBheGlvcwogICAgICAgIC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvdXNlcnMvbWUvJywgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IHRva2VuCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLnByb2ZpbGUgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICB0aGlzLnRlc3RVc2VyID0gdGhpcy5wcm9maWxlLnRlc3RVc2VyCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRlc3RVc2VyKSAvLyB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiYmVmb3JlTG9nZ2VkIikKICAgICAgaWYodGhpcy50ZXN0VXNlciA9PSAndGVzdE9rJyl7CiAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiYmVmb3JlTG9nZ2VkIikKICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGVycm9yKCkpKQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgcG9zdERhdGEoZSkgewogICAgICAgIGxldCBvYmpNeVNlc3Npb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib2JqIikKICAgICAgICBsZXQgbXlTdG9yYWdlVG9rZW4gPSBKU09OLnBhcnNlKG9iak15U2Vzc2lvbikKICAgICAgICBsZXQgdG9rZW4gPSBteVN0b3JhZ2VUb2tlbi5teVRva2VuOwoKICAgICAgICB0aGlzLmF4aW9zLnB1dCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS91c2Vycy9tZS8nLCB0aGlzLnBvc3RzLCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogdG9rZW4KICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLnByb2ZpbGUuYmlvID0gcmVzcG9uc2UuZGF0YS5iaW8KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IoKSkpCgogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgfSwgCiAgICAgIGRlbFByb2ZpbCgpIHsKICAgICAgICBsZXQgb2JqTXlTZXNzaW9uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9iaiIpCiAgICAgICAgbGV0IG15U3RvcmFnZVRva2VuID0gSlNPTi5wYXJzZShvYmpNeVNlc3Npb24pCiAgICAgICAgbGV0IHRva2VuID0gbXlTdG9yYWdlVG9rZW4ubXlUb2tlbjsKCiAgICAgICAgdGhpcy5heGlvcy5wb3N0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3VzZXJzL2RlbFByb2ZpbCcsIG51bGwsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiB0b2tlbgogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMucHJvZmlsZSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IoKSkpCgogICAgICB9CiAgICB9CiAgfQoK"},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class='group'>\n        <div class='group__header'>\n            <div id=\"app\">\n                <div class='group__header__body'>\n                    <h2>Mon profil</h2>\n                    <div>Pseudo: {{ profile.username }}</div>\n                    <div>Email: {{ profile.email }}</div>\n                    <div>Biographie: {{ profile.bio }}</div>\n                </div>\n            </div>\n            <form @submit=\"postData\" method=\"post\">\n                <div class='group__header__body'>\n                    <label>Mettre Ã  jour ma biographie</label> <br> <br>\n                    <textarea\n                            id=\"bio\"\n                            name=\"bio\"\n                            placeholder=\"Biographie\"\n                            type=\"text\"\n                            v-model=\"posts.bio\"\n                    ></textarea> <br> <br>\n                    <button type=\"submit\">Soumettre</button>\n                    <button @click=\"delProfil()\">Supprimer</button>\n                </div>\n            </form>\n        </div>\n\n    </div>\n</template>\n\n<script>\n  import axios from 'axios';\n// import { mapState } from 'vuex';\n\n  export default {\n    data() {\n      return {\n        profile: '',\n        posts: {\n          username: '',\n          email: '',\n          bio: '',\n        }\n      }\n    },\n    created() {\n      let objMySession = localStorage.getItem(\"obj\")\n      let myStorageToken = JSON.parse(objMySession)\n      let token = myStorageToken.myToken;\n      axios\n        .get('http://localhost:3000/api/users/me/', {\n          headers: {\n            'Authorization': token\n          }\n        })\n        .then(response => {\n          this.profile = response.data\n          this.testUser = this.profile.testUser\n          console.log(this.testUser) // this.$store.dispatch(\"beforeLogged\")\n      if(this.testUser == 'testOk'){\n       this.$store.dispatch(\"beforeLogged\")\n      }\n        })\n        .catch(error => console.log(error()))\n    },\n    methods: {\n      postData(e) {\n        let objMySession = localStorage.getItem(\"obj\")\n        let myStorageToken = JSON.parse(objMySession)\n        let token = myStorageToken.myToken;\n\n        this.axios.put('http://localhost:3000/api/users/me/', this.posts, {\n          headers: {\n            'Authorization': token\n          }\n        })\n          .then(response => {\n            this.profile.bio = response.data.bio\n          })\n          .catch(error => console.log(error()))\n\n        e.preventDefault();\n      }, \n      delProfil() {\n        let objMySession = localStorage.getItem(\"obj\")\n        let myStorageToken = JSON.parse(objMySession)\n        let token = myStorageToken.myToken;\n\n        this.axios.post('http://localhost:3000/api/users/delProfil', null, {\n          headers: {\n            'Authorization': token\n          }\n        })\n          .then(response => {\n            this.profile = response.data\n          })\n          .catch(error => console.log(error()))\n\n      }\n    }\n  }\n\n</script>\n<style scoped>\n    .group {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: space-evenly;\n    }\n\n    * {\n        box-sizing: border-box;\n    }\n\n    .group__header {\n        font-size: 1.2rem;\n        align-items: center;\n        padding: 1rem;\n        border-radius: 2rem;\n          background-color: rgb(35, 49, 82);\n\n\n\n    }\n\n    .group__header__body {\n        padding: 1rem;\n        background-color: rgba(196, 192, 192, 0.849);\n\n        border-radius: 2rem;\n        margin-top: 1rem;\n        margin-bottom: 1rem;\n    }\n</style>"]}]}