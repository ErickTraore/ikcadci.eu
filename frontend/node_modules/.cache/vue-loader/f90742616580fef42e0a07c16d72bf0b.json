{"remainingRequest":"/Users/traore/Sites/oc/P7/P7-groupomania/laura/p7_babacar/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/traore/Sites/oc/P7/P7-groupomania/laura/p7_babacar/frontend/src/components/ListMessagesItemDemoComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/traore/Sites/oc/P7/P7-groupomania/laura/p7_babacar/frontend/src/components/ListMessagesItemDemoComponent.vue","mtime":1640412706403},{"path":"/Users/traore/Sites/oc/P7/P7-groupomania/laura/p7_babacar/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1631176188195},{"path":"/Users/traore/Sites/oc/P7/P7-groupomania/laura/p7_babacar/frontend/node_modules/babel-loader/lib/index.js","mtime":1631176189508},{"path":"/Users/traore/Sites/oc/P7/P7-groupomania/laura/p7_babacar/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1631176188195},{"path":"/Users/traore/Sites/oc/P7/P7-groupomania/laura/p7_babacar/frontend/node_modules/vue-loader/lib/index.js","mtime":1631176189929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgVnVlRmlsdGVyRGF0ZUZvcm1hdCBmcm9tICdAdnVlanMtY29tbXVuaXR5L3Z1ZS1maWx0ZXItZGF0ZS1mb3JtYXQnOwoKICAgVnVlLnVzZShWdWVGaWx0ZXJEYXRlRm9ybWF0KTsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIHByb3BzOiB7CiAgICAgICAgaWQ6IHsKICAgICAgICAgICAgZGVmYXVsdDogIlZhbGV1ciBwYXIgZGVmYXV0IgogICAgICAgIH0sCiAgICAgICAgdGl0bGU6IHsKICAgICAgICAgICAgZGVmYXVsdDogIlZhbGV1ciBwYXIgZGVmYXV0IgogICAgICAgIH0sCiAgICAgICAgY29udGVudDogewogICAgICAgICAgICBkZWZhdWx0OiAiVmFsZXVyIHBhciBkZWZhdXQiCiAgICAgICAgfSwKICAgICAgICBjcmVhdGVkQXQ6IHsKICAgICAgICAgICAgZGVmYXVsdDogIlZhbGV1ciBwYXIgZGVmYXV0IgogICAgICAgIH0sCiAgICAgICAgVXNlclVzZXJuYW1lOiB7CiAgICAgICAgICAgIGRlZmF1bHQ6ICJWYWxldXIgcGFyIGRlZmF1dCIKICAgICAgICB9LAogICAgICAgIGF0dGFjaG1lbnQ6IHsKICAgICAgICAgICAgZGVmYXVsdDogIlZhbGV1ciBwYXIgZGVmYXV0IgogICAgICAgIH0sCiAgICAgICAgbGlrZXM6IHsKICAgICAgICAgICAgZGVmYXVsdDogIlZhbGV1ciBwYXIgZGVmYXV0IgogICAgICAgIH0sCiAgICAgICAgZGlzbGlrZXM6IHsKICAgICAgICAgICAgZGVmYXVsdDogIlZhbGV1ciBwYXIgZGVmYXV0IgogICAgICAgIH0sCiAgICAgICAgbXlJZDogewogICAgICAgICAgICBkZWZhdWx0OiAiVmFsZXVyIHBhciBkZWZhdXQiCiAgICAgICAgfSwKICAgICAgICBVc2VySWQ6IHsKICAgICAgICAgICAgZGVmYXVsdDogIlZhbGV1ciBwYXIgZGVmYXV0IgogICAgICAgIH0sCiAgICAgICAgc3Bhbkxpa2VzOiB7CiAgICAgICAgICAgIGRlZmF1bHQ6ICJWYWxldXIgcGFyIGRlZmF1dCIKICAgICAgICB9LAogICAgICAgIHNwYW5EaXNsaWtlczogewogICAgICAgICAgICBkZWZhdWx0OiAiVmFsZXVyIHBhciBkZWZhdXQiCiAgICAgICAgfSwKICAgICAgICAKCiAgICB9LAoKICAgIGRhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgIH0KICAgICAgfSwKICAgICAgIG1ldGhvZHM6IHsKICAgICAgb25MaWtlOiBmdW5jdGlvbiAoaWQpIHsKICAgICAgICBsZXQgb2JqTXlTZXNzaW9uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oIm9iaiIpCiAgICAgICAgbGV0IG15U3RvcmFnZVRva2VuID0gSlNPTi5wYXJzZShvYmpNeVNlc3Npb24pCiAgICAgICAgbGV0IHRva2VuID0gbXlTdG9yYWdlVG9rZW4ubXlUb2tlbjsKICAgICAgICB0aGlzLmF4aW9zLnBvc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvbWVzc2FnZXMvJyArIGlkICsgJy92b3RlL2xpa2UnLCBudWxsLCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IHRva2VuCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgICAgLmdldCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9tZXNzYWdlcy8nKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbSA9IHJlc3BvbnNlLmRhdGFbMF0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcy5pdGVtLmxpa2VzJywgdGhpcy5pdGVtLmxpa2VzKQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLml0ZW0uZGlzbGlrZXMnLCB0aGlzLml0ZW0uZGlzbGlrZXMpCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNwYW5MaWtlcyIpLmlubmVySFRNTCA9IHRoaXMuaXRlbS5saWtlczsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3BhbkRpc2xpa2VzIikuaW5uZXJIVE1MID0gdGhpcy5pdGVtLmRpc2xpa2VzOwoKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGVycm9yKCkpKQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IoKSkpCgogICAgICB9LAogICAgICBvbkRpc2xpa2U6IGZ1bmN0aW9uIChpZCkgewogICAgICAgIGxldCBvYmpNeVNlc3Npb24gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgib2JqIikKICAgICAgICBsZXQgbXlTdG9yYWdlVG9rZW4gPSBKU09OLnBhcnNlKG9iak15U2Vzc2lvbikKICAgICAgICBsZXQgdG9rZW4gPSBteVN0b3JhZ2VUb2tlbi5teVRva2VuOwogICAgICAgIHRoaXMuYXhpb3MucG9zdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9tZXNzYWdlcy8nICsgaWQgKyAnL3ZvdGUvZGlzbGlrZScsIG51bGwsIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogdG9rZW4KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICkKICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgIC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvbWVzc2FnZXMvJykKICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW0gPSByZXNwb25zZS5kYXRhWzBdCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RoaXMuaXRlbS5saWtlcycsIHRoaXMuaXRlbS5saWtlcykKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcy5pdGVtLmRpc2xpa2VzJywgdGhpcy5pdGVtLmRpc2xpa2VzKQogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcGFuTGlrZXMiKS5pbm5lckhUTUwgPSB0aGlzLml0ZW0ubGlrZXM7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNwYW5EaXNsaWtlcyIpLmlubmVySFRNTCA9IHRoaXMuaXRlbS5kaXNsaWtlczsKCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IoKSkpCiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGVycm9yKCkpKQogICAgICB9LAogICAgICBvbkRlbGV0ZTogZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgbGV0IG9iak15U2Vzc2lvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJvYmoiKQogICAgICAgIGxldCBteVN0b3JhZ2VUb2tlbiA9IEpTT04ucGFyc2Uob2JqTXlTZXNzaW9uKQogICAgICAgIGxldCB0b2tlbiA9IG15U3RvcmFnZVRva2VuLm15VG9rZW47CiAgICAgICAgdGhpcy5heGlvcy5wb3N0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL21lc3NhZ2VzLycgKyBpZCArICcvZGVsJywgbnVsbCwgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiB0b2tlbgogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHRoaXMuaXRlbXMgPSByZXNwb25zZS5kYXRhKQogICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZyhlcnJvcigpKSkKICAgICAgfQogICAgfSwKCn0KCgoK"},{"version":3,"sources":["ListMessagesItemDemoComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"ListMessagesItemDemoComponent.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n            <div>\n                        <figure>\n                            <img :src=\"attachment\" />\n                        </figure>\n                            <b>{{ UserUsername }}</b> à écrit le\n                            {{ new Date(createdAt) | dateFormat('DD/MM/YYYY') }} à\n                            {{ new Date(createdAt) | dateFormat('hh:mm') }} : <br>\n                            <div class=\"item\"> {{title}} </div>\n                            <div class=\"item\"> {{content}} </div>\n            </div>\n             <div _ngcontent-cpa-c6=\"\" class=\"position like-buttons group__header__body__second\">\n                                                          <div class=\"left\">\n                                                                              <div _ngcontent-cpa-c6=\"\" class=\"likes\">\n                                                                                  <button id=\"onLike\"\n                                                                                          v-on:click=\"onLike(id)\">\n                                                                                      <i _ngcontent-cpa-c6=\"\" class=\"like fa-thumbs-up fa-lg far\"></i>\n                                                                                  </button>\n                                                                                  <span id=\"spanLikes\"  class=\"spanLikes\" _ngcontent-cpa-c6=\"\">{{likes}}</span>\n\n                                                                              </div>\n                                                                              <div _ngcontent-cpa-c6=\"\" class=\"dislikes\">\n                                                                                  <button\n                                                                                          v-on:click=\"onDislike(id)\">\n                                                                                      <i _ngcontent-cpa-c6=\"\" class=\"dislike fa-thumbs-down fa-lg far\"></i>\n                                                                                  </button>\n                                                                                  <span id=\"spanDislikes\"  class=\"spanDislikes\" _ngcontent-cpa-c6=\"\">{{dislikes}}</span>\n                                                                              </div>\n                                                          </div>\n                                                          <div class=\"right\">\n                                                                                <div _ngcontent-cpa-c6=\"\" class=\"dislikes\">\n                                                                                    <button \n                                                                                    v-if=\"myId == UserId\"\n                                                                                    class=\"colorRed\"\n                                                                                    v-on:click=\"onDelete(id)\"\n                                                                                    >\n                                                                                      Supprimer votre message\n                                                                                    </button>\n                                                                                </div>\n                                                          </div>\n            </div>\n    </div>\n</template>\n<script>\nimport Vue from 'vue'\nimport axios from 'axios';\nimport VueFilterDateFormat from '@vuejs-community/vue-filter-date-format';\n\n   Vue.use(VueFilterDateFormat);\n\nexport default {\n    props: {\n        id: {\n            default: \"Valeur par defaut\"\n        },\n        title: {\n            default: \"Valeur par defaut\"\n        },\n        content: {\n            default: \"Valeur par defaut\"\n        },\n        createdAt: {\n            default: \"Valeur par defaut\"\n        },\n        UserUsername: {\n            default: \"Valeur par defaut\"\n        },\n        attachment: {\n            default: \"Valeur par defaut\"\n        },\n        likes: {\n            default: \"Valeur par defaut\"\n        },\n        dislikes: {\n            default: \"Valeur par defaut\"\n        },\n        myId: {\n            default: \"Valeur par defaut\"\n        },\n        UserId: {\n            default: \"Valeur par defaut\"\n        },\n        spanLikes: {\n            default: \"Valeur par defaut\"\n        },\n        spanDislikes: {\n            default: \"Valeur par defaut\"\n        },\n        \n\n    },\n\n    data() {\n      return {\n      }\n      },\n       methods: {\n      onLike: function (id) {\n        let objMySession = localStorage.getItem(\"obj\")\n        let myStorageToken = JSON.parse(objMySession)\n        let token = myStorageToken.myToken;\n        this.axios.post('http://localhost:3000/api/messages/' + id + '/vote/like', null, {\n            headers: {\n              'Authorization': token\n            }\n          }\n        )\n           .then(() => {\n               axios\n                .get('http://localhost:3000/api/messages/')\n                .then(response => {\n                    this.item = response.data[0]\n                    console.log('this.item.likes', this.item.likes)\n                    console.log('this.item.dislikes', this.item.dislikes)\n                    document.getElementById(\"spanLikes\").innerHTML = this.item.likes;\n                    document.getElementById(\"spanDislikes\").innerHTML = this.item.dislikes;\n\n                })\n                 .catch(error => console.log(error()))\n            })\n            .catch(error => console.log(error()))\n\n      },\n      onDislike: function (id) {\n        let objMySession = localStorage.getItem(\"obj\")\n        let myStorageToken = JSON.parse(objMySession)\n        let token = myStorageToken.myToken;\n        this.axios.post('http://localhost:3000/api/messages/' + id + '/vote/dislike', null, {\n            headers: {\n              'Authorization': token\n            }\n          }\n        )\n           .then(() => {\n              axios\n                .get('http://localhost:3000/api/messages/')\n                .then(response => {\n                    this.item = response.data[0]\n                    console.log('this.item.likes', this.item.likes)\n                    console.log('this.item.dislikes', this.item.dislikes)\n                    document.getElementById(\"spanLikes\").innerHTML = this.item.likes;\n                    document.getElementById(\"spanDislikes\").innerHTML = this.item.dislikes;\n\n              })\n              .catch(error => console.log(error()))\n          })\n          .catch(error => console.log(error()))\n      },\n      onDelete: function (id) {\n        let objMySession = localStorage.getItem(\"obj\")\n        let myStorageToken = JSON.parse(objMySession)\n        let token = myStorageToken.myToken;\n        this.axios.post('http://localhost:3000/api/messages/' + id + '/del', null, {\n            headers: {\n              'Authorization': token\n            }\n          })\n              .then(response => this.items = response.data)\n              .catch(error => console.log(error()))\n      }\n    },\n\n}\n\n\n\n</script>\n\n<style>\n\n.item{\n    background-color: #fff;\n    margin-top: 10px;\n    padding: 15px 0;\n    transition: 0.2s;\n    cursor: pointer;\n}\n\n.item:hover {\n    background-color: rgb(171, 194, 238);\n    color: white;\n\n}\n\n.item:active{\n    transition: 0.1s;\n    transform:s cale(0.9);\n\n}\n\n\n</style>"]}]}