{"remainingRequest":"/Users/traore/Sites/enConstruction/kemetmaat/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/traore/Sites/enConstruction/kemetmaat/frontend/src/views/Profile.vue?vue&type=style&index=0&id=ced23842&scoped=true&lang=css&","dependencies":[{"path":"/Users/traore/Sites/enConstruction/kemetmaat/frontend/src/views/Profile.vue","mtime":1640830342857},{"path":"/Users/traore/Sites/enConstruction/kemetmaat/frontend/node_modules/css-loader/dist/cjs.js","mtime":1631176189096},{"path":"/Users/traore/Sites/enConstruction/kemetmaat/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1631176190561},{"path":"/Users/traore/Sites/enConstruction/kemetmaat/frontend/node_modules/postcss-loader/src/index.js","mtime":1631176189504},{"path":"/Users/traore/Sites/enConstruction/kemetmaat/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1631176188195},{"path":"/Users/traore/Sites/enConstruction/kemetmaat/frontend/node_modules/vue-loader/lib/index.js","mtime":1631176189929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZ3JvdXAgewogICAgaGVpZ2h0OiAxMDAlOwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTsKfQoKKiB7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Owp9CgouZ3JvdXBfX2hlYWRlciB7CiAgICBmb250LXNpemU6IDEuMnJlbTsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBwYWRkaW5nOiAxcmVtOwogICAgYm9yZGVyLXJhZGl1czogMnJlbTsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDM1LCA0OSwgODIpOwoKCgp9CgouZ3JvdXBfX2hlYWRlcl9fYm9keSB7CiAgICBwYWRkaW5nOiAxcmVtOwogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgxOTYsIDE5MiwgMTkyLCAwLjg0OSk7CgogICAgYm9yZGVyLXJhZGl1czogMnJlbTsKICAgIG1hcmdpbi10b3A6IDFyZW07CiAgICBtYXJnaW4tYm90dG9tOiAxcmVtOwp9Cg=="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class='group'>\n        <div class='group__header'>\n            <div id=\"app\">\n                <div class='group__header__body'>\n                    <h2>Mon profil</h2>\n                    <div>Pseudo: {{ profile.username }}</div>\n                    <div>Email: {{ profile.email }}</div>\n                    <div>Biographie: {{ profile.bio }}</div>\n                </div>\n            </div>\n            <form @submit=\"postData\" method=\"post\">\n                <div class='group__header__body'>\n                    <label>Mettre Ã  jour ma biographie</label> <br> <br>\n                    <textarea\n                            id=\"bio\"\n                            name=\"bio\"\n                            placeholder=\"Biographie\"\n                            type=\"text\"\n                            v-model=\"posts.bio\"\n                    ></textarea> <br> <br>\n                    <button type=\"submit\">Soumettre</button>\n                    <button @click=\"delProfil()\">Supprimer</button>\n                </div>\n            </form>\n        </div>\n\n    </div>\n</template>\n\n<script>\n  import axios from 'axios';\n// import { mapState } from 'vuex';\n\n  export default {\n    data() {\n      return {\n        profile: '',\n        posts: {\n          username: '',\n          email: '',\n          bio: '',\n        }\n      }\n    },\n    created() {\n      let objMySession = localStorage.getItem(\"obj\")\n      let myStorageToken = JSON.parse(objMySession)\n      let token = myStorageToken.myToken;\n      axios\n        .get('http://localhost:3000/api/users/me/', {\n          headers: {\n            'Authorization': token\n          }\n        })\n        .then(response => {\n          this.profile = response.data\n          this.testUser = this.profile.testUser\n          console.log(this.testUser) // this.$store.dispatch(\"beforeLogged\")\n      if(this.testUser == 'testOk'){\n       this.$store.dispatch(\"beforeLogged\")\n      }\n        })\n        .catch(error => console.log(error()))\n    },\n    methods: {\n      postData(e) {\n        let objMySession = localStorage.getItem(\"obj\")\n        let myStorageToken = JSON.parse(objMySession)\n        let token = myStorageToken.myToken;\n\n        this.axios.put('http://localhost:3000/api/users/me/', this.posts, {\n          headers: {\n            'Authorization': token\n          }\n        })\n          .then(response => {\n            this.profile.bio = response.data.bio\n          })\n          .catch(error => console.log(error()))\n\n        e.preventDefault();\n      }, \n      delProfil() {\n        let objMySession = localStorage.getItem(\"obj\")\n        let myStorageToken = JSON.parse(objMySession)\n        let token = myStorageToken.myToken;\n\n        this.axios.post('http://localhost:3000/api/users/delProfil', null, {\n          headers: {\n            'Authorization': token\n          }\n        })\n          .then(response => {\n            this.profile = response.data\n          })\n          .catch(error => console.log(error()))\n\n      }\n    }\n  }\n\n</script>\n<style scoped>\n    .group {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: space-evenly;\n    }\n\n    * {\n        box-sizing: border-box;\n    }\n\n    .group__header {\n        font-size: 1.2rem;\n        align-items: center;\n        padding: 1rem;\n        border-radius: 2rem;\n          background-color: rgb(35, 49, 82);\n\n\n\n    }\n\n    .group__header__body {\n        padding: 1rem;\n        background-color: rgba(196, 192, 192, 0.849);\n\n        border-radius: 2rem;\n        margin-top: 1rem;\n        margin-bottom: 1rem;\n    }\n</style>"]}]}