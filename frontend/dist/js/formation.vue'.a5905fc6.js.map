{"version":3,"sources":["webpack:///./src/views/Formation.vue?0dc6","webpack:///src/views/Formation.vue","webpack:///./src/views/Formation.vue?0085","webpack:///./src/views/Formation.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","attrs","on","onPostData","staticClass","errors","_l","error","key","_s","_e","directives","name","rawName","value","formation","expression","domProps","$event","target","composing","$set","Array","isArray","isActive","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","image","removeImage","onFileSelected","staticRenderFns","loadingTemplate","loadingImage","loading","idImage","testName","Boolean","file","Blob","attachment","titleFirst","titleSecond","niveau","duration","selectedFile","formations","posts","props","methods","e","preventDefault","console","log","post","files","dataTransfer","length","createImage","reader","FileReader","vm","onload","result","readAsDataURL","headers","token","response","data","dispatchEvent","Event","status","json","component"],"mappings":"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","file":"js/formation.vue'.a5905fc6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"Enregistrez une formation \"),_c('form',{attrs:{\"method\":\"post\",\"enctype\":\"multipart/form-data\",\"name\":\"formation\"},on:{\"submit\":_vm.onPostData}},[_c('label',{staticClass:\"labelForm\"},[_vm._v(\"Nouveau message avec image optionnelle\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),(_vm.errors.length)?_c('p',[_c('b',[_vm._v(\"Merci de corriger les erreurs suivantes : \")]),_c('ul',_vm._l((_vm.errors),function(error){return _c('li',{key:error},[_vm._v(_vm._s(error))])}),0)]):_vm._e(),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formation.titleFirst),expression:\"formation.titleFirst\"}],attrs:{\"id\":\"titleFirst\",\"type\":\"text\",\"name\":\"titleFirst\",\"placeholder\":\"Titre principal\"},domProps:{\"value\":(_vm.formation.titleFirst)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.formation, \"titleFirst\", $event.target.value)}}}),_c('br'),_vm._v(\" \"),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formation.titleSecond),expression:\"formation.titleSecond\"}],attrs:{\"id\":\"titleSecond\",\"type\":\"text\",\"name\":\"titleSecond\",\"placeholder\":\"Titre secondaire\"},domProps:{\"value\":(_vm.formation.titleSecond)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.formation, \"titleSecond\", $event.target.value)}}}),_c('br'),_vm._v(\" \"),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formation.niveau),expression:\"formation.niveau\"}],attrs:{\"id\":\"niveau\",\"type\":\"text\",\"name\":\"niveau\",\"placeholder\":\"Niveau du diplome\"},domProps:{\"value\":(_vm.formation.niveau)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.formation, \"niveau\", $event.target.value)}}}),_c('br'),_vm._v(\" \"),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formation.duration),expression:\"formation.duration\"}],attrs:{\"id\":\"duration\",\"type\":\"text\",\"name\":\"duration\",\"placeholder\":\"Durée de la formation\"},domProps:{\"value\":(_vm.formation.duration)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.formation, \"duration\", $event.target.value)}}}),_c('br'),_vm._v(\" \"),_c('br'),_c('label',{staticClass:\"isActive\"},[_vm._v(\"Formation en cours? \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formation.isActive),expression:\"formation.isActive\"}],attrs:{\"id\":\"isActive\",\"type\":\"checkbox\",\"name\":\"isActive\",\"checked\":\"\"},domProps:{\"checked\":Array.isArray(_vm.formation.isActive)?_vm._i(_vm.formation.isActive,null)>-1:(_vm.formation.isActive)},on:{\"change\":function($event){var $$a=_vm.formation.isActive,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.formation, \"isActive\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.formation, \"isActive\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.formation, \"isActive\", $$c)}}}}),_c('br'),_vm._v(\" \"),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formation.attachment),expression:\"formation.attachment\"}],attrs:{\"id\":\"attachment\",\"type\":\"hidden\",\"name\":\"attachment\",\"placeholder\":\"attachment\"},domProps:{\"value\":(_vm.formation.attachment)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.formation, \"attachment\", $event.target.value)}}}),_c('br'),_c('div',[(!_vm.image)?_c('div',[_c('h2',[_vm._v(\"Choisir une image\")]),_c('div',{attrs:{\"id\":\"list\"}}),_c('input',{attrs:{\"id\":\"file\",\"type\":\"file\",\"name\":\"attachment\",\"alt\":\"example\"},on:{\"change\":_vm.onFileSelected}})]):_c('div',[(_vm.loadingImage)?_c('div',{staticClass:\"progress\"},[_c('div',{staticClass:\"value v-80 striped animate s-10\"},[_vm._v(\"Chargement...\")])]):_c('div',[_c('img',{attrs:{\"src\":_vm.image}})]),_c('button',{on:{\"click\":_vm.removeImage}},[_vm._v(\"Remove image\")])])]),_c('br'),_c('br'),_c('div'),_c('button',{attrs:{\"type\":\"submit\",\"value\":\"val\"}},[_vm._v(\" Envoyer \")]),_c('br'),_c('br')])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div>Enregistrez une formation\n                  <form @submit=\"onPostData\" method=\"post\" enctype=\"multipart/form-data\" name=\"formation\">\n                    <label class=\"labelForm\">Nouveau message avec image optionnelle</label> <br> <br>\n                    <p v-if=\"errors.length\">\n                        <b>Merci de corriger les erreurs suivantes : </b>\n                      <ul>\n                          <li v-for=\"error in errors\" :key=\"error\">{{ error }}</li>\n                      </ul>\n                   </p>\n  <input\n                            id=\"titleFirst\"\n                            v-model=\"formation.titleFirst\"\n                            type=\"text\"\n                            name=\"titleFirst\"\n                            placeholder=\"Titre principal\"\n  ><br> <br>\n   <input\n                            id=\"titleSecond\"\n                            v-model=\"formation.titleSecond\"\n                            type=\"text\"\n                            name=\"titleSecond\"\n                            placeholder=\"Titre secondaire\"\n  ><br> <br>\n    <input\n                            id=\"niveau\"\n                            v-model=\"formation.niveau\"\n                            type=\"text\"\n                            name=\"niveau\"\n                            placeholder=\"Niveau du diplome\"\n  ><br> <br>\n    <input\n                            id=\"duration\"\n                            v-model=\"formation.duration\"\n                            type=\"text\"\n                            name=\"duration\"\n                            placeholder=\"Durée de la formation\"\n  ><br> <br>\n                            <label class=\"isActive\">Formation en cours? </label>\n\n     <input\n                            id=\"isActive\"\n                            v-model=\"formation.isActive\"\n                            type=\"checkbox\"\n                            name=\"isActive\"\n                            checked\n><br> <br>\n  <input\n                            id=\"attachment\"\n                            v-model=\"formation.attachment\"\n                            type=\"hidden\"\n                            name=\"attachment\"\n                             placeholder=\"attachment\"\n                            > \n                            <br> \n                            <div>\n                            <div v-if=\"!image\">\n                            <h2>Choisir une image</h2>\n                            <div id=\"list\">\n                            </div>\n                            <input \n                            id=\"file\" \n                            type=\"file\" \n                            @change=\"onFileSelected\"\n                            name=\"attachment\"\n                            alt=\"example\"\n                            >\n                            </div>\n                          <div v-else>\n                            <div v-if=\"loadingImage\" class=\"progress\">\n                            <div class=\"value v-80 striped animate s-10\">Chargement...</div>\n                            </div>\n                            <div v-else>\n                            <img :src=\"image\" />\n                            </div>\n                            <button @click=\"removeImage\">Remove image</button>\n                          </div>\n                         \n                        </div><br><br>\n                        <div>\n                        </div>\n   <button \n                      type=\"submit\"\n                      value=\"val\"\n                    >\n                      Envoyer\n  </button><br><br>\n  </form>\n</div>\n</template>\n\n<script>\n  import Vue from 'vue'\n  import axios from 'axios';\n  import VueAxios from 'vue-axios'\n  import VueFilterDateFormat from '@vuejs-community/vue-filter-date-format';\n\n  Vue.use(VueFilterDateFormat);\n  Vue.use(VueAxios, axios);\nexport default {\n  name: \"Formation\",\n  created() {},\n  data() {\n    return {\n      loadingTemplate: true,\n      loadingImage: true,\n      errors: [],\n      loading: false,\n      idImage: '',\n      testName: Boolean,\n      file: Blob,\n      formation: {\n        attachment: '',\n        titleFirst:'',\n        titleSecond:'',\n        niveau: '',\n        duration: '',\n        isActive: true,\n        },\n      selectedFile: null,\n      formations: [],\n      image:'',\n      posts: {\n        attachment: '',\n        titleFirst: '',\n        titleSecond:'',\n        niveau: '',\n        duration: '',\n        isActive: '',\n        }\n    };\n  },\n  props: {},\n  methods: {  \n    onPostData(e) {\n      e.preventDefault();\n      console.log('Je suis un Yankee-1');\n        this.errors = [];\n                if (!this.formation.titleFirst) {\n          this.errors.push('Veillez saisir le titre principal');\n          }\n         else if (this.formation.titleFirst.length >= 30 || this.formation.titleFirst.length <= 3){\n          this.errors.push('Votre titre principal doit comprendre entre 4 et 30 caractères.');\n        }\n        if (!this.formation.titleSecond) {\n          this.errors.push('Veillez saisir le titre secondaire');\n          }\n         else if (this.formation.titleSecond.length >= 50 || this.formation.titleSecond.length <= 3){\n          this.errors.push('Votre second titre doit comprendre entre 4 et 50 caractères.');\n        }\n        if (!this.formation.niveau) {\n          this.errors.push('Veillez saisir le niveau de la formation');\n        } else if (this.formation.niveau.length <= 1){\n          this.errors.push('Le niveau doit contenir plus d 1 caracteres.');\n        }\n         if (!this.formation.duration) {\n          this.errors.push('Veillez saisir la durée de la formation');\n        } else if (this.formation.duration.length <= 1){\n          this.errors.push('Votre durée de formation doit contenir plus d 1 caractere.');\n        }\n        if (!this.errors.length) {\n          console.log('Vérification des inputs --> OK')\n          return this.post(this.formation);\n        }\n      console.log(this.errors);\n      console.log('Je suis un Yankee-2');\n      },\n    post: function (formation) {\n        console.log('Je suis un Yankee-3');\n        let objMySession = localStorage.getItem(\"obj\")\n        let myStorageToken = JSON.parse(objMySession)\n        let token = myStorageToken.myToken;\n        console.log('votre token',token );\n\n        this.axios.post('http://localhost:3000/api/formations/new/', formation, {\n            headers: {\n              'Authorization': token\n            }\n          }\n        )\n         .then(function(Formation) {\n            if (Formation) {\n\n                this.resetForm()\n            }\n               Formation.status(200).json(Formation);\n\n\n            // this.formation = response.data\n            // console.log('formation crée en bdd ok')\n            // axios\n            //   .get('http://localhost:3000/api/formations/')\n            //   .then(response => {\n            //     this.formations = response.data\n            //     this.resetForm()\n            //     this.image = '';\n            //     response.status(200).json(this.formations);\n            //     })\n            //   .catch(function(err) {\n            //     err.statusCode = 401;\n            //   });\n          })\n          .catch(function(err) {\n                err.statusCode = 401;\n              });\n      },\n onFileSelected(e) {\n      this.selectedFile = e.target.files[0];\n      var files = e.target.files || e.dataTransfer.files;\n      if (!files.length)\n        return;\n      this.createImage(files[0]);\n    },\n    createImage(file) {\n      // var image = new Image();\n      var reader = new FileReader();\n      var vm = this;\n      reader.onload = (e) => {\n        vm.image = e.target.result;\n      };\n      reader.readAsDataURL(file);\n      if(this.image)\n        return; \n        this.pushImage();\n    },\n    pushImage() {\n        let objMySession = localStorage.getItem(\"obj\")\n        let myStorageToken = JSON.parse(objMySession)\n        let token = myStorageToken.myToken;\n        var fileName = fileName;\n        var formData = new FormData();\n        var imagefile = document.querySelector('#file');\n        console.log('Mon imageFile[0] :',imagefile.files[0]);\n        formData.append(\"file\", imagefile.files[0]);\n        setTimeout(() => {\n        axios\n        .post('http://localhost:3000/api/formations/upload', formData, {\n          headers: {\n            'Authorization': token,\n            'Content-Type': 'multipart/form-data' \n          }\n      })   \n     .then((response) => {\n       console.log('valeure reçu par le back:',response.data);\n       console.log('valeure res.data.idImage:',response.data.idImage);\n\n          return response.data.idImage;\n     })\n     .then(function(idImage){\n\n\n       const attachment = document.querySelector(\"#attachment\");\n          attachment.value = \"http://localhost:3000/formations/images/\"+idImage;\n\n          attachment.dispatchEvent(new Event('input'));\n\n          status(200).json({idImage})\n     })\n    .catch(function(err) {\n     err.statusCode = 401;\n                    })\n    .finally(() => \n          this.loadingImage = false\n        )\n          }, 1000)\n  },\n    removeImage: function(e) {\n        let objMySession = localStorage.getItem(\"obj\")\n        let myStorageToken = JSON.parse(objMySession)\n        let token = myStorageToken.myToken;\n        var fileName = this.selectedFile.name;\n        \n        console.log('Envoie dufichier pour écrasement',fileName);\n        var formData = new FormData();\n        formData.append(\"file\", this.selectedFile);\n      \n        axios.post('http://localhost:3000/api/formations/delLienImage', formData, {\n          headers: {\n            'Authorization': token,\n            'Content-Type': 'multipart/form-data' \n          }\n      })   \n\n      this.image = '';\n      console.log('Le fichier vient d\\'être effacé du navigateur');\n      this.formation.attachment = '';\n      console.log('L\\'url du fichier vient d\\'être effacé du formulaire');\n      e.preventDefault();\n    },\n    // doDelete: function (id) {\n    //     let objMySession = localStorage.getItem(\"obj\")\n    //     let myStorageToken = JSON.parse(objMySession)\n    //     let token = myStorageToken.myToken;\n    //     this.axios.post('http://localhost:3000/api/formations/' + id + '/del', null, {\n    //         headers: {\n    //           'Authorization': token\n    //         }\n    //       })\n    //     .then((response) => {\n    //         this.axios\n    //           .get('http://localhost:3000/api/formations/')\n    //           .then(response => {\n    //             console.log('Deleting formation')\n    //             this.formations = response.data\n    //             this.resetForm()\n    //             response.status(200).json(this.formations);\n    //             })\n    //            .catch(function(err) {\n    //             err.statusCode = 401;\n    //             });\n    //       })\n    //     .catch(function(err) {\n    //           err.statusCode = 401;\n    //           });\n    //   }\n  }\n  }\n</script>\n\n<style lang=\"scss\" scoped></style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Formation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Formation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Formation.vue?vue&type=template&id=5002abbe&scoped=true&\"\nimport script from \"./Formation.vue?vue&type=script&lang=js&\"\nexport * from \"./Formation.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5002abbe\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}