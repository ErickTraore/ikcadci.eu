(function(e){function t(t){for(var s,o,r=t[0],l=t[1],c=t[2],u=0,m=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);p&&p(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,o=1;o<a.length;o++){var r=a[o];0!==n[r]&&(s=!1)}s&&(i.splice(t--,1),e=l(l.s=a[0]))}return e}var s={},o={app:0},n={app:0},i=[];function r(e){return l.p+"js/"+({"compte.vue":"compte.vue",comptemessages:"comptemessages","formation.vue'":"formation.vue'","listFormations.vue'":"listFormations.vue'",login:"login",logout:"logout","pageNotFound.vue'":"pageNotFound.vue'",profile:"profile",signup:"signup",updateUserProfile:"updateUserProfile"}[e]||e)+"."+{"compte.vue":"0c8f5261",comptemessages:"5505d0b3","formation.vue'":"a5905fc6","listFormations.vue'":"0e31934c",login:"6af831ad",logout:"5ec0e0cb","pageNotFound.vue'":"b5f1346a",profile:"e6814ad1",signup:"667ba8ca",updateUserProfile:"e4e890c9"}[e]+".js"}function l(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={"compte.vue":1,comptemessages:1,login:1,profile:1,signup:1,updateUserProfile:1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=new Promise((function(t,a){for(var s="css/"+({"compte.vue":"compte.vue",comptemessages:"comptemessages","formation.vue'":"formation.vue'","listFormations.vue'":"listFormations.vue'",login:"login",logout:"logout","pageNotFound.vue'":"pageNotFound.vue'",profile:"profile",signup:"signup",updateUserProfile:"updateUserProfile"}[e]||e)+"."+{"compte.vue":"788c45e7",comptemessages:"fa6315a9","formation.vue'":"31d6cfe0","listFormations.vue'":"31d6cfe0",login:"97849bb8",logout:"31d6cfe0","pageNotFound.vue'":"31d6cfe0",profile:"8b5f72e8",signup:"2eb927ca",updateUserProfile:"d327fc4c"}[e]+".css",n=l.p+s,i=document.getElementsByTagName("link"),r=0;r<i.length;r++){var c=i[r],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===s||u===n))return t()}var m=document.getElementsByTagName("style");for(r=0;r<m.length;r++){c=m[r],u=c.getAttribute("data-href");if(u===s||u===n)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var s=t&&t.target&&t.target.src||n,i=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=s,delete o[e],p.parentNode.removeChild(p),a(i)},p.href=n;var d=document.getElementsByTagName("head")[0];d.appendChild(p)})).then((function(){o[e]=0})));var s=n[e];if(0!==s)if(s)t.push(s[2]);else{var i=new Promise((function(t,a){s=n[e]=[t,a]}));t.push(s[2]=i);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=r(e);var m=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(p);var a=n[e];if(0!==a){if(a){var s=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;m.message="Loading chunk "+e+" failed.\n("+s+": "+o+")",m.name="ChunkLoadError",m.type=s,m.request=o,a[1](m)}n[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=s,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(a,s,function(t){return e[t]}.bind(null,s));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var m=0;m<c.length;m++)t(c[m]);var p=u;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},2:function(e,t){},"21bb":function(e,t,a){"use strict";a("2dad")},"2dad":function(e,t,a){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("nav",{staticClass:"navbar navbar-expand-sm navbar-dark"},[a("div",{staticClass:"container-fluid"},[e._m(1),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"mynavbar"}},[a("ul",{staticClass:"navbar-nav me-auto"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[e._v("Messagerie")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/profile"}},[e._v("Profile")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/listFormations"}},[e._v("Formation")])],1),a("li",{staticClass:"nav-item"},[e.logged?a("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[e._v("Login")]):a("router-link",{staticClass:"nav-link",attrs:{to:"/logout"}},[e._v("Logout")])],1),a("li",{staticClass:"nav-item"},[e.testBool?a("router-link",{staticClass:"nav-link",attrs:{to:"/compte"}},[e._v("Admin-users")]):e._e()],1),a("li",{staticClass:"nav-item"},[e.testBool?a("router-link",{staticClass:"nav-link",attrs:{to:"/comptemessages"}},[e._v("Admin-messages")]):e._e()],1),a("li",{staticClass:"nav-item"},[e.testBool?a("router-link",{staticClass:"nav-link",attrs:{to:"/formation"}},[e._v("Admin-formations")]):e._e()],1)]),e._m(2)])])]),a("router-view")],1)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"projPrev",attrs:{id:"container"}},[s("div",{staticClass:"projPrev__groupo rotateLogo"},[s("img",{staticClass:"projPrev__groupo__masq",attrs:{alt:"Logo-groupomania",src:a("74c1")}}),s("div",{staticClass:"projPrev__groupo__pic"},[e._v(" Institut Kemetmaat ")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#mynavbar"}},[a("span",{staticClass:"navbar-toggler-icon"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"d-flex"},[a("input",{staticClass:"form-control me-2",attrs:{type:"text",placeholder:"Search"}}),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[e._v("Search")])])}],i=a("bc3a"),r=a.n(i),l=a("130e"),c=a("2f62");s["a"].use(l["a"],r.a);var u={computed:{...Object(c["c"])(["logged"]),testBool(){return this.item.isAdmin}},data(){return{item:""}},created(){let e=localStorage.getItem("obj"),t=JSON.parse(e),a=t.myToken;r.a.get("http://localhost:3000/api/users/me/",{headers:{Authorization:a}}).then(e=>{this.item=e.data}).catch(e=>console.log(e()))},props:{},methods:{}},m=u,p=(a("5c0b"),a("2877")),d=Object(p["a"])(m,o,n,!1,null,null,null),g=d.exports,h=a("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"group"},[e.loadingTemplate?a("div",{staticClass:"progress conteneur"},[a("pulse-loader",{attrs:{loading:e.loading,color:e.color,size:e.size}})],1):a("div",[a("div",{staticClass:"group__header",attrs:{id:"app"}},[a("div",{staticClass:"group__header__body"},e._l(e.messages,(function(t){return a("div",{key:t.id,staticClass:"container"},[a("div",{staticClass:"group__header__body__first"},[a("div",{staticClass:"group__header__body__first__in"},[a("img",{attrs:{src:t.attachment}}),e._m(0,!0),a("b",[e._v(e._s(t.User.username))]),e._v(" à écrit le "+e._s(e._f("dateFormat")(new Date(t.createdAt),"DD/MM/YYYY"))+" à "+e._s(e._f("dateFormat")(new Date(t.createdAt),"hh:mm"))+" : "),a("br"),a("div",{staticClass:"group__header__body__first__title"},[e._v(" Titre: "+e._s(t.title)+" ")])]),a("div",{staticClass:"group__header__body__first__down"},[e._v(" "+e._s(t.content)),a("br")])]),a("div",{staticClass:"position like-buttons group__header__body__second",attrs:{"_ngcontent-cpa-c6":""}},[a("div",{staticClass:"left"},[a("div",{staticClass:"likes",attrs:{"_ngcontent-cpa-c6":""}},[a("button",{attrs:{id:"dolike"},on:{click:function(a){return e.doLike(t.id)}}},[a("i",{staticClass:"like fa-thumbs-up fa-lg far",attrs:{"_ngcontent-cpa-c6":""}})]),a("span",{staticClass:"spanLikes",attrs:{"_ngcontent-cpa-c6":""}},[e._v(e._s(t.likes))])]),a("div",{staticClass:"dislikes",attrs:{"_ngcontent-cpa-c6":""}},[a("button",{on:{click:function(a){return e.doDislike(t.id)}}},[a("i",{staticClass:"dislike fa-thumbs-down fa-lg far",attrs:{"_ngcontent-cpa-c6":""}})]),a("span",{staticClass:"spanDislikes",attrs:{"_ngcontent-cpa-c6":""}},[e._v(e._s(t.dislikes))])])]),a("div",{staticClass:"right"},[a("div",{staticClass:"dislikes",attrs:{"_ngcontent-cpa-c6":""}},[e.myId==t.UserId?a("button",{staticClass:"btn-1",on:{click:function(a){return e.doDelete(t.id)}}},[e._v(" Suppression ! ")]):e._e()])])]),a("ul")])})),0),a("div",{staticClass:"group__header__body"},[a("form",{attrs:{method:"post",enctype:"multipart/form-data",name:"message"},on:{submit:e.onPostData}},[a("label",{staticClass:"labelForm"},[e._v("Nouveau message avec image optionnelle")]),e._v(" "),a("br"),e._v(" "),a("br"),e.errors.length?a("p",[a("b",[e._v("Merci de corriger les erreurs suivantes : ")]),a("ul",e._l(e.errors,(function(t){return a("li",{key:t},[e._v(e._s(t))])})),0)]):e._e(),a("input",{directives:[{name:"model",rawName:"v-model",value:e.message.title,expression:"message.title"}],attrs:{id:"title",type:"text",name:"title",placeholder:"Titre"},domProps:{value:e.message.title},on:{input:function(t){t.target.composing||e.$set(e.message,"title",t.target.value)}}}),e._v(" "),a("br"),e._v(" "),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.message.content,expression:"message.content"}],attrs:{id:"content",type:"text",name:"content",placeholder:"Contenu"},domProps:{value:e.message.content},on:{input:function(t){t.target.composing||e.$set(e.message,"content",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.message.attachment,expression:"message.attachment"}],attrs:{id:"attachment",type:"hidden",name:"attachment"},domProps:{value:e.message.attachment},on:{input:function(t){t.target.composing||e.$set(e.message,"attachment",t.target.value)}}}),a("br"),a("div",[e.image?a("div",[e.loadingImage?a("div",{staticClass:"progress"},[a("div",{staticClass:"value v-80 striped animate s-10"},[e._v("Chargement...")])]):a("div",[a("img",{attrs:{src:e.image}})]),a("button",{on:{click:e.removeImage}},[e._v("Remove image")])]):a("div",[a("h4",[e._v("Choisir une image")]),a("div",{attrs:{id:"list"}}),a("input",{attrs:{id:"file",type:"file",name:"attachment",alt:"example"},on:{change:e.onFileSelected}})])]),a("br"),a("br"),a("div"),a("button",{attrs:{type:"submit",value:"val"}},[e._v(" Envoyer")])])])])])])},v=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"progress-bar"}},[a("div")])}],_=a("9cae"),b=_["a"],C=(a("21bb"),Object(p["a"])(b,f,v,!1,null,null,null)),y=C.exports;s["a"].use(h["a"]);const k=[{path:"/",name:"Home",component:y},{path:"/login",name:"Login",component:()=>a.e("login").then(a.bind(null,"a55b"))},{path:"/logout",name:"Logout",component:()=>a.e("logout").then(a.bind(null,"c100"))},{path:"/signup",name:"Signup",component:()=>a.e("signup").then(a.bind(null,"34c3"))},{path:"/profile",name:"Profile",component:()=>a.e("profile").then(a.bind(null,"c66d"))},{path:"/updateUserProfile",name:"UpdateUserProfile",component:()=>a.e("updateUserProfile").then(a.bind(null,"16a2"))},{path:"/compte",name:"Compte",component:()=>a.e("compte.vue").then(a.bind(null,"a6c2"))},{path:"/comptemessages",name:"Comptemessages",component:()=>a.e("comptemessages").then(a.bind(null,"c8fb"))},{path:"*",name:"NotFound",component:()=>a.e("pageNotFound.vue'").then(a.bind(null,"a5b5"))},{path:"/formation",name:"Formation",component:()=>a.e("formation.vue'").then(a.bind(null,"2660"))},{path:"/listFormations",name:"ListFormations",component:()=>a.e("listFormations.vue'").then(a.bind(null,"5fda"))}],F=new h["a"]({routes:k});var O=F,w=a("0e44");s["a"].use(c["a"]);var S=new c["a"].Store({state:{logged:!0,role:!1},plugins:[Object(w["a"])()],mutations:{NOW_LOGGED(e){e.logged=!1},BEFORE_LOGGED(e){e.logged=!0}},actions:{nowLogged(e){e.commit("NOW_LOGGED")},beforeLogged(e){e.commit("BEFORE_LOGGED")}},getters:{}});s["a"].config.productionTip=!1,new s["a"]({router:O,store:S,render:e=>e(g)}).$mount("#app")},"5c0b":function(e,t,a){"use strict";a("9c0c")},6:function(e,t){},7:function(e,t){},"74c1":function(e,t,a){e.exports=a.p+"img/masque_kemet.3ae7f278.png"},8:function(e,t){},9:function(e,t){},"9c0c":function(e,t,a){},"9cae":function(e,t,a){"use strict";(function(e){var s=a("2b0e"),o=(a("9490"),a("bc3a")),n=a.n(o),i=a("8a5d"),r=a("130e"),l=a("4380"),c=a("5a30"),u=a.n(c),m=a("2f62");const p=a("df7c"),d="undefined"===typeof e.pkg;d?e.cwd():p.dirname(e.execPath),a("9490");a("30dc");s["a"].use(l["a"]),s["a"].use(r["a"],n.a),t["a"]={name:"Home",computed:{...Object(m["b"])(["imageExist"])},data(){return{loadingTemplate:!0,loadingImage:!0,myId:Number,idImage:"",testName:Boolean,file:Blob,errors:[],message:{title:"",content:"",attachment:""},image:"",selectedFile:null,messages:[],likes:0,dislikes:0,posts:{title:"",content:"",attachment:"",loading:!1},color:"#071b46",color1:"red",size:"45px",margin:"2px",radius:"2px"}},components:{PulseLoader:i["a"]},created(){let e=localStorage.getItem("obj"),t=JSON.parse(e),a=t.myId;setTimeout(()=>{n.a.get("http://localhost:3000/api/messages/").then(e=>{this.myId=a,this.messages=e.data}).catch(e=>console.log(e())).finally(()=>this.loadingTemplate=!1)},1e3)},methods:{resetForm(){console.log("Reseting the form");var e=this;Object.keys(this.message).forEach((function(t,a){e.message[t]=""}))},doLike:function(e){let t=localStorage.getItem("obj"),a=JSON.parse(t),s=a.myToken;this.axios.post("http://localhost:3000/api/messages/"+e+"/vote/like",null,{headers:{Authorization:s}}).then(()=>{n.a.get("http://localhost:3000/api/messages/").then(e=>this.messages=e.data).catch(e=>console.log(e()))}).catch(e=>console.log(e()))},doDislike:function(e){let t=localStorage.getItem("obj"),a=JSON.parse(t),s=a.myToken;this.axios.post("http://localhost:3000/api/messages/"+e+"/vote/dislike",null,{headers:{Authorization:s}}).then(()=>{n.a.get("http://localhost:3000/api/messages/").then(e=>this.messages=e.data).catch(e=>console.log(e()))}).catch(e=>console.log(e()))},onPostData(e){if(e.preventDefault(),this.errors=[],this.message.title?(this.message.title.length>=30||this.message.title.length<=3)&&this.errors.push("Votre titre doit comprendre entre 4 et 30 caractères."):this.errors.push("Veillez saisir le titre"),this.message.content?(this.message.content.length>=550||this.message.content.length<=3)&&this.errors.push("Votre message doit contenir entre 4 et 550 caractères."):this.errors.push("Veillez saisir le message"),!this.errors.length)return console.log("Vérification des inputs --\x3e OK"),this.post(this.message)},post:function(e,t){let a=localStorage.getItem("obj"),s=JSON.parse(a),o=s.myToken;this.axios.post("http://localhost:3000/api/messages/new/",e,{headers:{Authorization:o}}).then(e=>{this.message=e.data,console.log("message crée ok"),n.a.get("http://localhost:3000/api/messages/").then(e=>{this.messages=e.data,this.resetForm(),this.image="",res.status(200).json(this.messages)}).catch((function(e){e.statusCode=401}))}).catch((function(e){e.statusCode=401}))},onFileSelected(e){this.selectedFile=e.target.files[0];var t=e.target.files||e.dataTransfer.files;t.length&&this.createImage(t[0])},createImage(e,t){new Image;var a=new FileReader,s=this;a.onload=e=>{s.image=e.target.result},a.readAsDataURL(e),this.image||this.pushImage()},pushImage(e){let t=localStorage.getItem("obj"),s=JSON.parse(t),o=s.myToken;a("3022");var i=new u.a,r=document.querySelector("#file");console.log("Mon imageFile[0] :",r.files[0]),i.append("file",r.files[0]),setTimeout(()=>{n.a.post("http://localhost:3000/api/messages/upload",i,{headers:{Authorization:o,"Content-Type":"multipart/form-data"}}).then(e=>(console.log("valeure reçu par le back:",e.data),console.log("valeure res.data.idImage:",e.data.idImage),e.data.idImage)).then((function(e){const t=document.querySelector("#attachment");t.value="http://localhost:3000/images/"+e,t.dispatchEvent(new Event("input")),response.status(200).json({idImage:e})})).catch((function(e){e.statusCode=401})).finally(()=>this.loadingImage=!1)},1e3)},removeImage:function(e){let t=localStorage.getItem("obj"),a=JSON.parse(t),s=a.myToken;var o=this.selectedFile.name;console.log("Envoie dufichier pour écrasement",o);var i=new u.a;i.append("file",this.selectedFile),n.a.post("http://localhost:3000/api/messages/delLienImage",i,{headers:{Authorization:s,"Content-Type":"multipart/form-data"}}),this.image="",console.log("Le fichier vient d'être effacé du navigateur"),this.message.attachment="",console.log("L'url du fichier vient d'être effacé du formulaire"),e.preventDefault()},doDelete:function(e){let t=localStorage.getItem("obj"),a=JSON.parse(t),s=a.myToken;this.axios.post("http://localhost:3000/api/messages/"+e+"/del",null,{headers:{Authorization:s}}).then(e=>{console.log("Deleting message-1"),n.a.get("http://localhost:3000/api/messages/").then(e=>{console.log("Deleting message"),this.messages=e.data,this.resetForm(),res.status(200).json(this.messages)}).catch((function(e){e.statusCode=401}))}).catch((function(e){e.statusCode=401}))}}}}).call(this,a("4362"))}});
//# sourceMappingURL=app.86f7fbb1.js.map