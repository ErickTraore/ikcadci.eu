(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["comptemessages"],{"3cc5":function(t,e,s){"use strict";s("99be")},"63c4":function(t,e,s){"use strict";(function(t){var a=s("2b0e"),n=(s("9490"),s("bc3a")),i=s.n(n),o=s("130e"),c=s("4380"),l=s("5a30"),r=s.n(l),d=s("2f62");const u=s("df7c"),g="undefined"===typeof t.pkg;g?t.cwd():u.dirname(t.execPath),s("9490");s("30dc");a["a"].use(c["a"]),a["a"].use(o["a"],i.a),e["a"]={name:"Home",computed:{...Object(d["b"])(["imageExist"])},data(){return{myId:Number,idImage:"",testName:Boolean,file:Blob,errors:[],message:{title:null,content:null,attachment:null},image:"",selectedFile:null,messages:[],likes:0,dislikes:0,posts:{title:null,content:null,attachment:""}}},created(){let t=localStorage.getItem("obj"),e=JSON.parse(t),s=e.myToken,a=e.myId;i.a.get("http://localhost:3000/api/messagesAdmin/",{headers:{Authorization:s}}).then(t=>{this.myId=a,this.messages=t.data}).catch(t=>console.log(t()))},methods:{post:function(t){let e=localStorage.getItem("obj"),s=JSON.parse(e),a=s.myToken;this.axios.post("http://localhost:3000/api/messages/new/",t,{headers:{Authorization:a}}).then(t=>{this.message=t.data,i.a.get("http://localhost:3000/api/messages/").then(t=>{this.messages=t.data}).catch(t=>console.log(t()))})},onFileSelected(t){this.selectedFile=t.target.files[0];var e=t.target.files||t.dataTransfer.files;e.length&&this.createImage(e[0])},createImage(t,e){new Image;var s=new FileReader,a=this;s.onload=t=>{a.image=t.target.result},s.readAsDataURL(t),this.image||this.pushImage()},pushImage(t){let e=localStorage.getItem("obj"),a=JSON.parse(e),n=a.myToken;s("3022");var o=new r.a,c=document.querySelector("#file");console.log("Mon imageFile[0] :",c.files[0]),o.append("file",c.files[0]),i.a.post("http://localhost:3000/api/messages/upload",o,{headers:{Authorization:n,"Content-Type":"multipart/form-data"}}).then(t=>(console.log("valeure reçu par le back:",t.data),console.log("valeure res.data.idImage:",t.data.idImage),t.data.idImage)).then((function(t){const e=document.querySelector("#attachment");e.value="http://localhost:3000/images/"+t,e.dispatchEvent(new Event("input")),response.status(200).json({idImage:t})})).catch((function(t){t.statusCode=401}))},doDelete:function(t){let e=localStorage.getItem("obj"),s=JSON.parse(e),a=s.myToken;this.axios.post("http://localhost:3000/api/messages/"+t+"/del",null,{headers:{Authorization:a}}).then(t=>{console.log("Deleting message-1"),i.a.get("http://localhost:3000/api/messages/").then(t=>{console.log("Deleting message"),this.messages=t.data,this.resetForm(),res.status(200).json(this.messages)}).catch((function(t){t.statusCode=401}))}).catch((function(t){t.statusCode=401}))}}}}).call(this,s("4362"))},"99be":function(t,e,s){},c8fb:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"group__header__body"},t._l(t.messages,(function(e){return s("div",{key:e.id,staticClass:"container"},[s("div",{staticClass:"group__header__body__first"},[s("div",{staticClass:"group__header__body__first__in"},[s("figure",[s("img",{attrs:{src:e.attachment}})]),s("b",[t._v("Mon id: "+t._s(t.myId))]),t._v(" "),s("br"),s("b",[t._v("Mon messageUserId: "+t._s(e.UserId))]),t._v(" "),s("br"),s("b",[t._v(t._s(e.User.username))]),t._v(" à écrit le "+t._s(t._f("dateFormat")(new Date(e.createdAt),"DD/MM/YYYY"))+" à "+t._s(t._f("dateFormat")(new Date(e.createdAt),"hh:mm"))+" : "),s("br"),s("b",[t._v(t._s(e.title))]),s("br")]),s("div",{staticClass:"group__header__body__first__down"},[t._v(" "+t._s(e.content)),s("br")])]),s("div",{staticClass:"position like-buttons group__header__body__second",attrs:{"_ngcontent-cpa-c6":""}},[s("div",{staticClass:"left"},[s("div",{staticClass:"likes",attrs:{"_ngcontent-cpa-c6":""}},[s("button",{attrs:{id:"dolike"},on:{click:function(s){return t.doLike(e.id)}}},[s("i",{staticClass:"like fa-thumbs-up fa-lg far",attrs:{"_ngcontent-cpa-c6":""}})]),s("span",{staticClass:"spanLikes",attrs:{"_ngcontent-cpa-c6":""}},[t._v(t._s(e.likes))])]),s("div",{staticClass:"dislikes",attrs:{"_ngcontent-cpa-c6":""}},[s("button",{on:{click:function(s){return t.doDislike(e.id)}}},[s("i",{staticClass:"dislike fa-thumbs-down fa-lg far",attrs:{"_ngcontent-cpa-c6":""}})]),s("span",{staticClass:"spanDislikes",attrs:{"_ngcontent-cpa-c6":""}},[t._v(t._s(e.dislikes))])])]),s("div",{staticClass:"right"},[s("div",{staticClass:"dislikes",attrs:{"_ngcontent-cpa-c6":""}},[s("button",{staticClass:"colorRed",on:{click:function(s){return t.doDelete(e.id)}}},[t._v(" Supprimer votre message ")])])])]),s("ul")])})),0)])},n=[],i=s("63c4"),o=i["a"],c=(s("3cc5"),s("2877")),l=Object(c["a"])(o,a,n,!1,null,"5c752dec",null);e["default"]=l.exports}}]);
//# sourceMappingURL=comptemessages.5505d0b3.js.map